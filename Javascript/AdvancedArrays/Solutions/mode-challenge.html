<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Mode</title>
</head>
<body>
	<h1>Mode</h1>
	<script>
		var nums = [-1, -1, -1, 10, 10, 100, 99, 99, 99];
		document.write(nums);

		function mode(arr) {
			var max = arr.reduce( (n, m) => n > m ? n : m );
			var min = arr.reduce( (n, m) => n < m ? n : m );
			var conversionValue = min < 0 ? Math.abs(min) : 0;
			var frequencies = new Array(max + conversionValue + 1);
			var modes = [];

			frequencies.fill(0);

			arr.forEach(function(value) {
				frequencies[value + conversionValue] = frequencies[value + conversionValue] + 1;
			});

			var maxFrequency = frequencies.reduce( (n, m) => n > m ? n : m );

			var maxOccurringElement = frequencies.indexOf(maxFrequency);
			while (maxOccurringElement != -1) {
				modes.push(maxOccurringElement - conversionValue);
				maxOccurringElement = frequencies.indexOf(maxFrequency, maxOccurringElement + 1);
			}
			return modes;
		}

		document.write('<hr>');
		var mode = mode(nums);
		document.write(mode);
	</script>
</body>
</html>